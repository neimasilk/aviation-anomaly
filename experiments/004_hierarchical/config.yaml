# Experiment 004 Configuration
# Hierarchical Transformer for sequential CVR analysis

experiment:
  id: "004"
  title: "Hierarchical Transformer"
  description: "Utterance-level Transformer for temporal pattern modeling in CVR transcripts"
  tags: ["hierarchical", "transformer", "sequential", "model_b"]
  created: "2026-01-08"
  status: "in_progress"

# Data configuration
data:
  source: "data/processed/cvr_labeled.csv"
  window_size: 10
  stride: 5
  max_utterances: 20
  max_utterance_length: 128
  text_column: "cvr_message"
  label_column: "label"
  case_id_column: "case_id"
  labels: ["NORMAL", "EARLY_WARNING", "ELEVATED", "CRITICAL"]

  # Data splits
  test_split: 0.2
  val_split: 0.1
  random_seed: 42

  # Class weights (for imbalanced classes)
  class_weights:
    NORMAL: 1.0
    EARLY_WARNING: 1.5
    ELEVATED: 2.0
    CRITICAL: 3.0

# Model configuration
model:
  type: "hierarchical_transformer"
  encoder: "bert-base-uncased"
  num_labels: 4

  # Hierarchical Transformer specific params
  d_model: 768
  n_heads: 8
  n_layers: 4
  dim_feedforward: 2048
  dropout: 0.1
  max_utterances: 20

# Training configuration
training:
  batch_size: 8
  learning_rate: 1e-5
  weight_decay: 0.01
  max_epochs: 30
  early_stopping_patience: 5
  gradient_clip: 1.0
  warmup_ratio: 0.1

# Evaluation configuration
evaluation:
  metrics:
    - accuracy
    - macro_f1
    - per_class_f1
    - per_class_precision
    - per_class_recall

# Paths (relative to project root)
paths:
  output_dir: "outputs/experiments/004"
  checkpoint_dir: "models/004"
  log_dir: "logs/004"

# Hardware (will be overridden by env DEVICE)
device: "auto"

# Logging
logging:
  log_interval: 10
  save_interval: 100
  tensorboard: false
